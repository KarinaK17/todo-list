(()=>{"use strict";var t={d:(e,a)=>{for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{$:()=>g});let e=[];class a{constructor(t){this.name=t,this.tasks=[]}createTask(t,e,a,d,n){let c=new s(t,e,a,d,n);return this.tasks.push(c),c}deleteTask(t){this.tasks.splice(t,1)}}class s{constructor(t,e,a,s){this.title=t,this.description=e,this.date=a,this.priority=s,this.complete=!1}editTask(t,e,a,s){this.title=t,this.description=e,this.date=a,this.priority=s}}function d(t){let s=new a(t);e.push(s)}document.querySelector(".content");const n=document.querySelector(".projects-container"),c=document.querySelector(".add-project"),o=document.querySelector(".cancel-project"),l=document.querySelector(".add-task"),r=document.querySelector(".cancel-task"),i=document.querySelector(".edit-task"),p=document.querySelector(".close-task");function u(){n.innerHTML="";for(let t=0;t<e.length;t++){const a=document.createElement("div");n.appendChild(a),a.dataset.p=t,a.classList.add("project");const s=document.createElement("img");s.classList.add("pin"),s.setAttribute("src","./pin.svg"),s.setAttribute("alt","pin");const d=document.createElement("h2");d.dataset.pn=a.dataset.p,d.textContent=`${e[d.dataset.pn].name}`;const c=document.createElement("div");c.classList.add("task-container"),c.dataset.tc=a.dataset.p;const o=document.createElement("button");o.textContent="Add a new task!",o.classList.add("open-task-form-btn"),o.dataset.otf=c.dataset.tc,c.appendChild(o),o.addEventListener("click",(()=>{l.dataset.at=c.dataset.tc,document.querySelector(".task-form-window").style.display="flex"}));for(let a=0;a<e[t].tasks.length;a++){const t=document.createElement("div");t.classList.add("task"),t.dataset.tn=a,t.dataset.pc=o.dataset.otf,c.appendChild(t);const s=document.createElement("input");s.setAttribute("type","checkbox"),s.dataset.cp=t.dataset.pc,s.dataset.c=t.dataset.tn,s.checked=e[s.dataset.cp].tasks[s.dataset.c].complete,s.addEventListener("change",(()=>{!1===e[s.dataset.cp].tasks[s.dataset.c].complete?(e[s.dataset.cp].tasks[s.dataset.c].complete=!0,null!==document.querySelector(`[data-complete="${t.dataset.tn}"][data-completep="${t.dataset.pc}"]`)&&(document.querySelector(`[data-complete="${t.dataset.tn}"][data-completep="${t.dataset.pc}"]`).textContent="Task complete: yes")):(e[s.dataset.cp].tasks[s.dataset.c].complete=!1,null!==document.querySelector(`[data-complete="${t.dataset.tn}"][data-completep="${t.dataset.pc}"]`)&&(document.querySelector(`[data-complete="${t.dataset.tn}"][data-completep="${t.dataset.pc}"]`).textContent="Task complete: no")),g()}));const d=document.createElement("p");d.classList.add("short-task"),d.dataset.tt=t.dataset.tn,d.dataset.ttp=t.dataset.pc,d.textContent=`${e[d.dataset.ttp].tasks[d.dataset.tt].title} due ${e[d.dataset.ttp].tasks[d.dataset.tt].date}`;const n=document.createElement("button");n.setAttribute("type","button"),n.textContent="View details",n.dataset.v=t.dataset.tn,n.dataset.vp=t.dataset.pc,n.addEventListener("click",(()=>{if("View details"==n.textContent){n.textContent="Hide details";const a=document.createElement("div");a.classList.add("details"),a.dataset.vd=n.dataset.v,a.dataset.vdp=n.dataset.vp,t.insertBefore(a,p);const s=document.createElement("p");s.textContent=`Title: ${e[n.dataset.vp].tasks[n.dataset.v].title}`;const d=document.createElement("p");d.textContent=`Description: ${e[n.dataset.vp].tasks[n.dataset.v].description}`;const c=document.createElement("p");let o;c.textContent=`Due date: ${e[n.dataset.vp].tasks[n.dataset.v].date}`;const l=document.createElement("p");let r;!1===e[n.dataset.vp].tasks[n.dataset.v].priority?o="no":(o="yes",l.classList.add("priority")),l.textContent=`High priority: ${o}`,r=!1===e[n.dataset.vp].tasks[n.dataset.v].complete?"no":"yes";const i=document.createElement("p");i.setAttribute("id","completeness"),i.dataset.completep=t.dataset.pc,i.dataset.complete=t.dataset.tn,i.textContent=`Task complete: ${r}`,a.append(s,d,c,l,i)}else n.textContent="View details",document.querySelector(`[data-tn="${n.dataset.v}"][data-pc="${n.dataset.vp}"]`).removeChild(document.querySelector(`[data-vd="${n.dataset.v}"][data-vdp="${n.dataset.vp}"]`))})),!0===e[n.dataset.vp].tasks[n.dataset.v].priority&&t.setAttribute("id","important");const l=document.createElement("button");l.setAttribute("type","button"),l.textContent="Edit",l.dataset.e=t.dataset.tn,l.dataset.ep=t.dataset.pc,l.addEventListener("click",(()=>{i.dataset.et=l.dataset.e,i.dataset.etp=l.dataset.ep,document.querySelector(".view-task-window").style.display="flex",document.getElementById("task-title-v").value=e[i.dataset.etp].tasks[i.dataset.et].title,document.getElementById("task-description-v").value=e[i.dataset.etp].tasks[i.dataset.et].description,document.getElementById("task-date-v").value=e[i.dataset.etp].tasks[i.dataset.et].date,document.getElementById("task-priority-v").checked=e[i.dataset.etp].tasks[i.dataset.et].priority})),i.addEventListener("click",(t=>{t.preventDefault(),e[i.dataset.etp].tasks[i.dataset.et].editTask(document.getElementById("task-title-v").value,document.getElementById("task-description-v").value,document.getElementById("task-date-v").value,document.getElementById("task-priority-v").checked),console.log(e),g(),v(),m()}));const r=document.createElement("button");r.setAttribute("type","button"),r.textContent="Delete",r.dataset.d=t.dataset.tn,r.dataset.dp=t.dataset.pc,r.addEventListener("click",(()=>{e[r.dataset.dp].deleteTask(r.dataset.d),console.log(e),g(),m()}));const p=document.createElement("div");p.classList.add("button-container"),p.append(n,l,r),t.append(s,d,p)}const r=document.createElement("button");r.textContent="Delete Project",r.setAttribute("type","button"),r.classList.add("delete-project-btn"),r.dataset.pd=a.dataset.p,r.addEventListener("click",(()=>{var t;t=r.dataset.pd,e.splice(t,1),g(),m(),console.log(e)})),a.append(s,d,c,r)}}function m(){u()}function k(){document.querySelector(".project-form-window").style.display="flex"}function y(){document.querySelector(".project-form-window").style.display="none"}function v(){document.querySelector(".view-task-window").style.display="none"}function E(){document.querySelector(".task-form-window").style.display="none"}document.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".open-project-form").addEventListener("click",k)})),o.addEventListener("click",y),c.addEventListener("click",(t=>{t.preventDefault(),d(document.getElementById("project-name").value),y(),g(),console.log(e),u()})),r.addEventListener("click",E),l.addEventListener("click",(t=>{var a;t.preventDefault(),a=l.dataset.at,e[a].createTask(document.getElementById("task-title").value,document.getElementById("task-description").value,document.getElementById("task-date").value,document.getElementById("task-priority").checked),E(),g(),u(),console.log(e)})),p.addEventListener("click",v);let f=JSON.parse(localStorage.getItem("projectsJSON"));function g(){localStorage.setItem("projectsJSON",JSON.stringify(e))}null===f?(d("Personal tasks"),d("Work tasks"),console.log(e),e[0].createTask("Buy a new dress","buy a new dress for Mary's wedding on 20.04.2023","2023-04-10",!0),e[0].createTask("Make a dentist's appointment","Make a dentist's appointment to check out a cavity","2023-02-25",!0),e[1].createTask("Buy a new mug","Buy a new coffee mug to leave at work","2023-03-01",!1),localStorage.setItem("projectsJSON",JSON.stringify(e))):(f.forEach((t=>{!function(t){Object.setPrototypeOf(t,a.prototype)}(t),t.tasks.forEach((t=>function(t){Object.setPrototypeOf(t,s.prototype)}(t)))})),e=f),u(),console.log(e)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWlCLGNBQ2pCeUUsUUFBUUMsSUFBSWpHLEdBRVpBLEVBQVMsR0FBR00sV0FDVixrQkFDQSxtREFDQSxjQUNBLEdBRUZOLEVBQVMsR0FBR00sV0FDViwrQkFDQSxxREFDQSxjQUNBLEdBRUZOLEVBQVMsR0FBR00sV0FDVixnQkFDQSx3Q0FDQSxjQUNBLEdBR0YwRyxhQUFhRSxRQUFRLGVBQWdCSixLQUFLSyxVQUFVbkgsTUFFcEQ2RyxFQUFhTyxTQUFTQyxLQVd4QixTQUE4QkEsR0FDNUI5SCxPQUFPK0gsZUFBZUQsRUFBU3BILEVBQVFKLFVBQ3pDLENBWkkwSCxDQUFxQkYsR0FDckJBLEVBQVFoSCxNQUFNK0csU0FBU0ksR0FLM0IsU0FBMkJBLEdBQ3pCakksT0FBTytILGVBQWVFLEVBQU0zRyxFQUFLaEIsVUFDbkMsQ0FQb0M0SCxDQUFrQkQsSUFBTSxJQUUxRHhILEVBQVc2RyxHQWViMUUsSUFFQTZELFFBQVFDLElBQUlqRyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2xvZ2ljLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwibGV0IHByb2plY3RzID0gW107XG5cbmNsYXNzIFByb2plY3Qge1xuICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnRhc2tzID0gW107XG4gIH1cblxuICBjcmVhdGVUYXNrKHRpdGxlLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHksIGNvbXBsZXRlKSB7XG4gICAgbGV0IHRhc2sxID0gbmV3IFRhc2sodGl0bGUsIGRlc2NyaXB0aW9uLCBkYXRlLCBwcmlvcml0eSwgY29tcGxldGUpO1xuICAgIHRoaXMudGFza3MucHVzaCh0YXNrMSk7XG4gICAgcmV0dXJuIHRhc2sxO1xuICB9XG5cbiAgZGVsZXRlVGFzayh0YXNrSW5kZXgpIHtcbiAgICB0aGlzLnRhc2tzLnNwbGljZSh0YXNrSW5kZXgsIDEpO1xuICB9XG59XG5cbmNsYXNzIFRhc2sge1xuICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIGRhdGUsIHByaW9yaXR5KSB7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLmRhdGUgPSBkYXRlO1xuICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICB0aGlzLmNvbXBsZXRlID0gZmFsc2U7XG4gIH1cblxuICBlZGl0VGFzayhuZXdUaXRsZSwgbmV3RGVzY3JpcHRpb24sIG5ld0RhdGUsIG5ld1ByaW9yaXR5KSB7XG4gICAgdGhpcy50aXRsZSA9IG5ld1RpdGxlO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBuZXdEZXNjcmlwdGlvbjtcbiAgICB0aGlzLmRhdGUgPSBuZXdEYXRlO1xuICAgIHRoaXMucHJpb3JpdHkgPSBuZXdQcmlvcml0eTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVQcm9qZWN0QXJyKHByb2plY3ROYW1lKSB7XG4gIGxldCBwcm9qZWN0MiA9IG5ldyBQcm9qZWN0KHByb2plY3ROYW1lKTtcbiAgcHJvamVjdHMucHVzaChwcm9qZWN0Mik7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZVByb2plY3QocHJvamVjdEluZGV4KSB7XG4gIHByb2plY3RzLnNwbGljZShwcm9qZWN0SW5kZXgsIDEpO1xufVxuXG5leHBvcnQgeyBwcm9qZWN0cywgUHJvamVjdCwgVGFzaywgY3JlYXRlUHJvamVjdEFyciwgZGVsZXRlUHJvamVjdCB9O1xuIiwiaW1wb3J0IHsgcHJvamVjdHMsIGRlbGV0ZVByb2plY3QgfSBmcm9tIFwiLi9sb2dpY1wiO1xuaW1wb3J0IHsgc2F2ZUNoYW5nZXMgfSBmcm9tIFwiLi9pbmRleFwiO1xuXG5jb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50XCIpO1xuY29uc3QgcHJvamVjdHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzLWNvbnRhaW5lclwiKTtcbmNvbnN0IGFkZFByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1wcm9qZWN0XCIpO1xuY29uc3QgY2FuY2VsUHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsLXByb2plY3RcIik7XG5jb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFza1wiKTtcbmNvbnN0IGNhbmNlbFRhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbmNlbC10YXNrXCIpO1xuY29uc3QgZWRpdFRhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtdGFza1wiKTtcbmNvbnN0IGNsb3NlRWRpdFRhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlLXRhc2tcIik7XG5cbmZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0cygpIHtcbiAgcHJvamVjdHNDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9qZWN0cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHByb2plY3RzQ29udGFpbmVyLmFwcGVuZENoaWxkKHApO1xuICAgIHAuZGF0YXNldC5wID0gaTtcbiAgICBwLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0XCIpO1xuXG4gICAgY29uc3QgcGluID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBwaW4uY2xhc3NMaXN0LmFkZChcInBpblwiKTtcbiAgICBwaW4uc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi9waW4uc3ZnXCIpO1xuICAgIHBpbi5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgXCJwaW5cIik7XG5cbiAgICBjb25zdCBwTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgICBwTmFtZS5kYXRhc2V0LnBuID0gcC5kYXRhc2V0LnA7XG4gICAgcE5hbWUudGV4dENvbnRlbnQgPSBgJHtwcm9qZWN0c1twTmFtZS5kYXRhc2V0LnBuXS5uYW1lfWA7XG5cbiAgICBjb25zdCB0YXNrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0YXNrQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWNvbnRhaW5lclwiKTtcbiAgICB0YXNrQ29udGFpbmVyLmRhdGFzZXQudGMgPSBwLmRhdGFzZXQucDtcblxuICAgIGNvbnN0IG9wZW5UYXNrRm9ybUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgb3BlblRhc2tGb3JtQnRuLnRleHRDb250ZW50ID0gXCJBZGQgYSBuZXcgdGFzayFcIjtcbiAgICBvcGVuVGFza0Zvcm1CdG4uY2xhc3NMaXN0LmFkZChcIm9wZW4tdGFzay1mb3JtLWJ0blwiKTtcbiAgICBvcGVuVGFza0Zvcm1CdG4uZGF0YXNldC5vdGYgPSB0YXNrQ29udGFpbmVyLmRhdGFzZXQudGM7XG4gICAgdGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZChvcGVuVGFza0Zvcm1CdG4pO1xuICAgIG9wZW5UYXNrRm9ybUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgYWRkVGFza0J0bi5kYXRhc2V0LmF0ID0gdGFza0NvbnRhaW5lci5kYXRhc2V0LnRjO1xuICAgICAgb3BlblRhc2tGb3JtKCk7XG4gICAgfSk7XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHByb2plY3RzW2ldLnRhc2tzLmxlbmd0aDsgaisrKSB7XG4gICAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHRhc2tEaXYuY2xhc3NMaXN0LmFkZChcInRhc2tcIik7XG4gICAgICB0YXNrRGl2LmRhdGFzZXQudG4gPSBqO1xuICAgICAgdGFza0Rpdi5kYXRhc2V0LnBjID0gb3BlblRhc2tGb3JtQnRuLmRhdGFzZXQub3RmO1xuICAgICAgdGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrRGl2KTtcblxuICAgICAgY29uc3QgY2hhbmdlU3RhdHVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgY2hhbmdlU3RhdHVzLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcbiAgICAgIGNoYW5nZVN0YXR1cy5kYXRhc2V0LmNwID0gdGFza0Rpdi5kYXRhc2V0LnBjO1xuICAgICAgY2hhbmdlU3RhdHVzLmRhdGFzZXQuYyA9IHRhc2tEaXYuZGF0YXNldC50bjtcbiAgICAgIGNoYW5nZVN0YXR1cy5jaGVja2VkID1cbiAgICAgICAgcHJvamVjdHNbY2hhbmdlU3RhdHVzLmRhdGFzZXQuY3BdLnRhc2tzW1xuICAgICAgICAgIGNoYW5nZVN0YXR1cy5kYXRhc2V0LmNcbiAgICAgICAgXS5jb21wbGV0ZTtcbiAgICAgIGNoYW5nZVN0YXR1cy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHByb2plY3RzW2NoYW5nZVN0YXR1cy5kYXRhc2V0LmNwXS50YXNrc1tjaGFuZ2VTdGF0dXMuZGF0YXNldC5jXVxuICAgICAgICAgICAgLmNvbXBsZXRlID09PSBmYWxzZVxuICAgICAgICApIHtcbiAgICAgICAgICBwcm9qZWN0c1tjaGFuZ2VTdGF0dXMuZGF0YXNldC5jcF0udGFza3NbXG4gICAgICAgICAgICBjaGFuZ2VTdGF0dXMuZGF0YXNldC5jXG4gICAgICAgICAgXS5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgYFtkYXRhLWNvbXBsZXRlPVwiJHt0YXNrRGl2LmRhdGFzZXQudG59XCJdW2RhdGEtY29tcGxldGVwPVwiJHt0YXNrRGl2LmRhdGFzZXQucGN9XCJdYFxuICAgICAgICAgICAgKSAhPT0gbnVsbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgYFtkYXRhLWNvbXBsZXRlPVwiJHt0YXNrRGl2LmRhdGFzZXQudG59XCJdW2RhdGEtY29tcGxldGVwPVwiJHt0YXNrRGl2LmRhdGFzZXQucGN9XCJdYFxuICAgICAgICAgICAgKS50ZXh0Q29udGVudCA9IGBUYXNrIGNvbXBsZXRlOiB5ZXNgO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9qZWN0c1tjaGFuZ2VTdGF0dXMuZGF0YXNldC5jcF0udGFza3NbXG4gICAgICAgICAgICBjaGFuZ2VTdGF0dXMuZGF0YXNldC5jXG4gICAgICAgICAgXS5jb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgIGBbZGF0YS1jb21wbGV0ZT1cIiR7dGFza0Rpdi5kYXRhc2V0LnRufVwiXVtkYXRhLWNvbXBsZXRlcD1cIiR7dGFza0Rpdi5kYXRhc2V0LnBjfVwiXWBcbiAgICAgICAgICAgICkgIT09IG51bGxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgIGBbZGF0YS1jb21wbGV0ZT1cIiR7dGFza0Rpdi5kYXRhc2V0LnRufVwiXVtkYXRhLWNvbXBsZXRlcD1cIiR7dGFza0Rpdi5kYXRhc2V0LnBjfVwiXWBcbiAgICAgICAgICAgICkudGV4dENvbnRlbnQgPSBgVGFzayBjb21wbGV0ZTogbm9gO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzYXZlQ2hhbmdlcygpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHNob3J0VGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgc2hvcnRUYXNrLmNsYXNzTGlzdC5hZGQoXCJzaG9ydC10YXNrXCIpO1xuICAgICAgc2hvcnRUYXNrLmRhdGFzZXQudHQgPSB0YXNrRGl2LmRhdGFzZXQudG47XG4gICAgICBzaG9ydFRhc2suZGF0YXNldC50dHAgPSB0YXNrRGl2LmRhdGFzZXQucGM7XG4gICAgICBzaG9ydFRhc2sudGV4dENvbnRlbnQgPSBgJHtcbiAgICAgICAgcHJvamVjdHNbc2hvcnRUYXNrLmRhdGFzZXQudHRwXS50YXNrc1tzaG9ydFRhc2suZGF0YXNldC50dF0udGl0bGVcbiAgICAgIH0gZHVlICR7XG4gICAgICAgIHByb2plY3RzW3Nob3J0VGFzay5kYXRhc2V0LnR0cF0udGFza3Nbc2hvcnRUYXNrLmRhdGFzZXQudHRdLmRhdGVcbiAgICAgIH1gO1xuXG4gICAgICBjb25zdCB2aWV3RGV0YWlsc0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICB2aWV3RGV0YWlsc0J0bi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xuICAgICAgdmlld0RldGFpbHNCdG4udGV4dENvbnRlbnQgPSBcIlZpZXcgZGV0YWlsc1wiO1xuICAgICAgdmlld0RldGFpbHNCdG4uZGF0YXNldC52ID0gdGFza0Rpdi5kYXRhc2V0LnRuO1xuICAgICAgdmlld0RldGFpbHNCdG4uZGF0YXNldC52cCA9IHRhc2tEaXYuZGF0YXNldC5wYztcblxuICAgICAgdmlld0RldGFpbHNCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgaWYgKHZpZXdEZXRhaWxzQnRuLnRleHRDb250ZW50ID09IFwiVmlldyBkZXRhaWxzXCIpIHtcbiAgICAgICAgICB2aWV3RGV0YWlsc0J0bi50ZXh0Q29udGVudCA9IFwiSGlkZSBkZXRhaWxzXCI7XG4gICAgICAgICAgY29uc3QgZGV0YWlscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgZGV0YWlscy5jbGFzc0xpc3QuYWRkKFwiZGV0YWlsc1wiKTtcbiAgICAgICAgICBkZXRhaWxzLmRhdGFzZXQudmQgPSB2aWV3RGV0YWlsc0J0bi5kYXRhc2V0LnY7XG4gICAgICAgICAgZGV0YWlscy5kYXRhc2V0LnZkcCA9IHZpZXdEZXRhaWxzQnRuLmRhdGFzZXQudnA7XG4gICAgICAgICAgdGFza0Rpdi5pbnNlcnRCZWZvcmUoZGV0YWlscywgYnV0dG9uQ29udGFpbmVyKTtcblxuICAgICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgIHRhc2tUaXRsZS50ZXh0Q29udGVudCA9IGBUaXRsZTogJHtcbiAgICAgICAgICAgIHByb2plY3RzW3ZpZXdEZXRhaWxzQnRuLmRhdGFzZXQudnBdLnRhc2tzW3ZpZXdEZXRhaWxzQnRuLmRhdGFzZXQudl1cbiAgICAgICAgICAgICAgLnRpdGxlXG4gICAgICAgICAgfWA7XG5cbiAgICAgICAgICBjb25zdCB0YXNrRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICB0YXNrRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBgRGVzY3JpcHRpb246ICR7XG4gICAgICAgICAgICBwcm9qZWN0c1t2aWV3RGV0YWlsc0J0bi5kYXRhc2V0LnZwXS50YXNrc1t2aWV3RGV0YWlsc0J0bi5kYXRhc2V0LnZdXG4gICAgICAgICAgICAgIC5kZXNjcmlwdGlvblxuICAgICAgICAgIH1gO1xuXG4gICAgICAgICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICB0YXNrRGF0ZS50ZXh0Q29udGVudCA9IGBEdWUgZGF0ZTogJHtcbiAgICAgICAgICAgIHByb2plY3RzW3ZpZXdEZXRhaWxzQnRuLmRhdGFzZXQudnBdLnRhc2tzW3ZpZXdEZXRhaWxzQnRuLmRhdGFzZXQudl1cbiAgICAgICAgICAgICAgLmRhdGVcbiAgICAgICAgICB9YDtcblxuICAgICAgICAgIGxldCBpbXBvcnRhbnQ7XG4gICAgICAgICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBwcm9qZWN0c1t2aWV3RGV0YWlsc0J0bi5kYXRhc2V0LnZwXS50YXNrc1t2aWV3RGV0YWlsc0J0bi5kYXRhc2V0LnZdXG4gICAgICAgICAgICAgIC5wcmlvcml0eSA9PT0gZmFsc2VcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGltcG9ydGFudCA9IFwibm9cIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW1wb3J0YW50ID0gXCJ5ZXNcIjtcbiAgICAgICAgICAgIHRhc2tQcmlvcml0eS5jbGFzc0xpc3QuYWRkKFwicHJpb3JpdHlcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGFza1ByaW9yaXR5LnRleHRDb250ZW50ID0gYEhpZ2ggcHJpb3JpdHk6ICR7aW1wb3J0YW50fWA7XG5cbiAgICAgICAgICBsZXQgY29tcGxldGVuZXNzO1xuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcHJvamVjdHNbdmlld0RldGFpbHNCdG4uZGF0YXNldC52cF0udGFza3Nbdmlld0RldGFpbHNCdG4uZGF0YXNldC52XVxuICAgICAgICAgICAgICAuY29tcGxldGUgPT09IGZhbHNlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb21wbGV0ZW5lc3MgPSBcIm5vXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbXBsZXRlbmVzcyA9IFwieWVzXCI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgdGFza0NvbXBsZXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgICAgdGFza0NvbXBsZXRlLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY29tcGxldGVuZXNzXCIpO1xuICAgICAgICAgIHRhc2tDb21wbGV0ZS5kYXRhc2V0LmNvbXBsZXRlcCA9IHRhc2tEaXYuZGF0YXNldC5wYztcbiAgICAgICAgICB0YXNrQ29tcGxldGUuZGF0YXNldC5jb21wbGV0ZSA9IHRhc2tEaXYuZGF0YXNldC50bjtcbiAgICAgICAgICB0YXNrQ29tcGxldGUudGV4dENvbnRlbnQgPSBgVGFzayBjb21wbGV0ZTogJHtjb21wbGV0ZW5lc3N9YDtcblxuICAgICAgICAgIGRldGFpbHMuYXBwZW5kKFxuICAgICAgICAgICAgdGFza1RpdGxlLFxuICAgICAgICAgICAgdGFza0Rlc2NyaXB0aW9uLFxuICAgICAgICAgICAgdGFza0RhdGUsXG4gICAgICAgICAgICB0YXNrUHJpb3JpdHksXG4gICAgICAgICAgICB0YXNrQ29tcGxldGVcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZpZXdEZXRhaWxzQnRuLnRleHRDb250ZW50ID0gXCJWaWV3IGRldGFpbHNcIjtcbiAgICAgICAgICBkb2N1bWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgIGBbZGF0YS10bj1cIiR7dmlld0RldGFpbHNCdG4uZGF0YXNldC52fVwiXVtkYXRhLXBjPVwiJHt2aWV3RGV0YWlsc0J0bi5kYXRhc2V0LnZwfVwiXWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5yZW1vdmVDaGlsZChcbiAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICBgW2RhdGEtdmQ9XCIke3ZpZXdEZXRhaWxzQnRuLmRhdGFzZXQudn1cIl1bZGF0YS12ZHA9XCIke3ZpZXdEZXRhaWxzQnRuLmRhdGFzZXQudnB9XCJdYFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKFxuICAgICAgICBwcm9qZWN0c1t2aWV3RGV0YWlsc0J0bi5kYXRhc2V0LnZwXS50YXNrc1t2aWV3RGV0YWlsc0J0bi5kYXRhc2V0LnZdXG4gICAgICAgICAgLnByaW9yaXR5ID09PSB0cnVlXG4gICAgICApIHtcbiAgICAgICAgdGFza0Rpdi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb3BlbkVkaXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgb3BlbkVkaXRCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgICAgIG9wZW5FZGl0QnRuLnRleHRDb250ZW50ID0gXCJFZGl0XCI7XG4gICAgICBvcGVuRWRpdEJ0bi5kYXRhc2V0LmUgPSB0YXNrRGl2LmRhdGFzZXQudG47XG4gICAgICBvcGVuRWRpdEJ0bi5kYXRhc2V0LmVwID0gdGFza0Rpdi5kYXRhc2V0LnBjO1xuICAgICAgb3BlbkVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgZWRpdFRhc2tCdG4uZGF0YXNldC5ldCA9IG9wZW5FZGl0QnRuLmRhdGFzZXQuZTtcbiAgICAgICAgZWRpdFRhc2tCdG4uZGF0YXNldC5ldHAgPSBvcGVuRWRpdEJ0bi5kYXRhc2V0LmVwO1xuICAgICAgICBvcGVuRWRpdFRhc2tGb3JtKCk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay10aXRsZS12XCIpLnZhbHVlID1cbiAgICAgICAgICBwcm9qZWN0c1tlZGl0VGFza0J0bi5kYXRhc2V0LmV0cF0udGFza3NbZWRpdFRhc2tCdG4uZGF0YXNldC5ldF0udGl0bGU7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay1kZXNjcmlwdGlvbi12XCIpLnZhbHVlID1cbiAgICAgICAgICBwcm9qZWN0c1tlZGl0VGFza0J0bi5kYXRhc2V0LmV0cF0udGFza3NbXG4gICAgICAgICAgICBlZGl0VGFza0J0bi5kYXRhc2V0LmV0XG4gICAgICAgICAgXS5kZXNjcmlwdGlvbjtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLWRhdGUtdlwiKS52YWx1ZSA9XG4gICAgICAgICAgcHJvamVjdHNbZWRpdFRhc2tCdG4uZGF0YXNldC5ldHBdLnRhc2tzW2VkaXRUYXNrQnRuLmRhdGFzZXQuZXRdLmRhdGU7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay1wcmlvcml0eS12XCIpLmNoZWNrZWQgPVxuICAgICAgICAgIHByb2plY3RzW2VkaXRUYXNrQnRuLmRhdGFzZXQuZXRwXS50YXNrc1tcbiAgICAgICAgICAgIGVkaXRUYXNrQnRuLmRhdGFzZXQuZXRcbiAgICAgICAgICBdLnByaW9yaXR5O1xuICAgICAgfSk7XG5cbiAgICAgIGVkaXRUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHByb2plY3RzW2VkaXRUYXNrQnRuLmRhdGFzZXQuZXRwXS50YXNrc1tcbiAgICAgICAgICBlZGl0VGFza0J0bi5kYXRhc2V0LmV0XG4gICAgICAgIF0uZWRpdFRhc2soXG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLXRpdGxlLXZcIikudmFsdWUsXG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLWRlc2NyaXB0aW9uLXZcIikudmFsdWUsXG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLWRhdGUtdlwiKS52YWx1ZSxcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stcHJpb3JpdHktdlwiKS5jaGVja2VkXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdHMpO1xuICAgICAgICBzYXZlQ2hhbmdlcygpO1xuICAgICAgICBjbG9zZUVkaXRUYXNrRm9ybSgpO1xuICAgICAgICByZW5ld0Rpc3BsYXkoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkZWxldGVUYXNrQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgIGRlbGV0ZVRhc2tCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgICAgIGRlbGV0ZVRhc2tCdG4udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiO1xuICAgICAgZGVsZXRlVGFza0J0bi5kYXRhc2V0LmQgPSB0YXNrRGl2LmRhdGFzZXQudG47XG4gICAgICBkZWxldGVUYXNrQnRuLmRhdGFzZXQuZHAgPSB0YXNrRGl2LmRhdGFzZXQucGM7XG4gICAgICBkZWxldGVUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHByb2plY3RzW2RlbGV0ZVRhc2tCdG4uZGF0YXNldC5kcF0uZGVsZXRlVGFzayhkZWxldGVUYXNrQnRuLmRhdGFzZXQuZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RzKTtcbiAgICAgICAgc2F2ZUNoYW5nZXMoKTtcbiAgICAgICAgcmVuZXdEaXNwbGF5KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGJ1dHRvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiYnV0dG9uLWNvbnRhaW5lclwiKTtcbiAgICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmQodmlld0RldGFpbHNCdG4sIG9wZW5FZGl0QnRuLCBkZWxldGVUYXNrQnRuKTtcblxuICAgICAgdGFza0Rpdi5hcHBlbmQoY2hhbmdlU3RhdHVzLCBzaG9ydFRhc2ssIGJ1dHRvbkNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgY29uc3QgZGVsZXRlUHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgZGVsZXRlUHJvamVjdEJ0bi50ZXh0Q29udGVudCA9IFwiRGVsZXRlIFByb2plY3RcIjtcbiAgICBkZWxldGVQcm9qZWN0QnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XG4gICAgZGVsZXRlUHJvamVjdEJ0bi5jbGFzc0xpc3QuYWRkKFwiZGVsZXRlLXByb2plY3QtYnRuXCIpO1xuICAgIGRlbGV0ZVByb2plY3RCdG4uZGF0YXNldC5wZCA9IHAuZGF0YXNldC5wO1xuICAgIGRlbGV0ZVByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGRlbGV0ZVByb2plY3QoZGVsZXRlUHJvamVjdEJ0bi5kYXRhc2V0LnBkKTtcbiAgICAgIHNhdmVDaGFuZ2VzKCk7XG4gICAgICByZW5ld0Rpc3BsYXkoKTtcbiAgICAgIGNvbnNvbGUubG9nKHByb2plY3RzKTtcbiAgICB9KTtcblxuICAgIHAuYXBwZW5kKHBpbiwgcE5hbWUsIHRhc2tDb250YWluZXIsIGRlbGV0ZVByb2plY3RCdG4pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbmV3RGlzcGxheSgpIHtcbiAgZGlzcGxheVByb2plY3RzKCk7XG59XG5cbmZ1bmN0aW9uIG9wZW5Qcm9qZWN0Rm9ybSgpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWZvcm0td2luZG93XCIpLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbn1cblxuZnVuY3Rpb24gY2xvc2VQcm9qZWN0Rm9ybSgpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWZvcm0td2luZG93XCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbn1cblxuZnVuY3Rpb24gb3BlbkVkaXRUYXNrRm9ybSgpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi52aWV3LXRhc2std2luZG93XCIpLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbn1cblxuZnVuY3Rpb24gY2xvc2VFZGl0VGFza0Zvcm0oKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudmlldy10YXNrLXdpbmRvd1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG59XG5cbmZ1bmN0aW9uIG9wZW5UYXNrRm9ybSgpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWZvcm0td2luZG93XCIpLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbn1cblxuZnVuY3Rpb24gY2FuY2VsVGFzaygpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWZvcm0td2luZG93XCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGFza0RPTShwcm9qZWN0SW5kZXgpIHtcbiAgcHJvamVjdHNbcHJvamVjdEluZGV4XS5jcmVhdGVUYXNrKFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay10aXRsZVwiKS52YWx1ZSxcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stZGVzY3JpcHRpb25cIikudmFsdWUsXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLWRhdGVcIikudmFsdWUsXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLXByaW9yaXR5XCIpLmNoZWNrZWRcbiAgKTtcbn1cblxuZXhwb3J0IHtcbiAgY29udGVudCxcbiAgcHJvamVjdHNDb250YWluZXIsXG4gIGFkZFByb2plY3QsXG4gIGNhbmNlbFByb2plY3QsXG4gIGFkZFRhc2tCdG4sXG4gIGNhbmNlbFRhc2tCdG4sXG4gIGVkaXRUYXNrQnRuLFxuICBjbG9zZUVkaXRUYXNrQnRuLFxuICBvcGVuUHJvamVjdEZvcm0sXG4gIGNsb3NlUHJvamVjdEZvcm0sXG4gIG9wZW5UYXNrRm9ybSxcbiAgY2FuY2VsVGFzayxcbiAgY3JlYXRlVGFza0RPTSxcbiAgZGlzcGxheVByb2plY3RzLFxuICByZW5ld0Rpc3BsYXksXG4gIG9wZW5FZGl0VGFza0Zvcm0sXG4gIGNsb3NlRWRpdFRhc2tGb3JtLFxufTtcbiIsImltcG9ydCB7IHByb2plY3RzLCBjcmVhdGVQcm9qZWN0QXJyLCBUYXNrLCBQcm9qZWN0IH0gZnJvbSBcIi4vbG9naWNcIjtcblxuaW1wb3J0IHtcbiAgYWRkUHJvamVjdCxcbiAgY2FuY2VsUHJvamVjdCxcbiAgYWRkVGFza0J0bixcbiAgY2FuY2VsVGFza0J0bixcbiAgY2xvc2VFZGl0VGFza0J0bixcbiAgb3BlblByb2plY3RGb3JtLFxuICBjbG9zZVByb2plY3RGb3JtLFxuICBjYW5jZWxUYXNrLFxuICBjcmVhdGVUYXNrRE9NLFxuICBkaXNwbGF5UHJvamVjdHMsXG4gIGNsb3NlRWRpdFRhc2tGb3JtLFxufSBmcm9tIFwiLi9kb21cIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICBkb2N1bWVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLm9wZW4tcHJvamVjdC1mb3JtXCIpXG4gICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUHJvamVjdEZvcm0pO1xufSk7XG5cbmNhbmNlbFByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlUHJvamVjdEZvcm0pO1xuXG5hZGRQcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNyZWF0ZVByb2plY3RBcnIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LW5hbWVcIikudmFsdWUpO1xuICBjbG9zZVByb2plY3RGb3JtKCk7XG4gIHNhdmVDaGFuZ2VzKCk7XG4gIGNvbnNvbGUubG9nKHByb2plY3RzKTtcbiAgZGlzcGxheVByb2plY3RzKCk7XG59KTtcblxuY2FuY2VsVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2FuY2VsVGFzayk7XG5cbmFkZFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY3JlYXRlVGFza0RPTShhZGRUYXNrQnRuLmRhdGFzZXQuYXQpO1xuICBjYW5jZWxUYXNrKCk7XG4gIHNhdmVDaGFuZ2VzKCk7XG4gIGRpc3BsYXlQcm9qZWN0cygpO1xuICBjb25zb2xlLmxvZyhwcm9qZWN0cyk7XG59KTtcblxuY2xvc2VFZGl0VGFza0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VFZGl0VGFza0Zvcm0pO1xuXG5sZXQgcHJvamVjdHNKU09OID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInByb2plY3RzSlNPTlwiKSk7XG5cbmlmIChwcm9qZWN0c0pTT04gPT09IG51bGwpIHtcbiAgY3JlYXRlUHJvamVjdEFycihcIlBlcnNvbmFsIHRhc2tzXCIpO1xuICBjcmVhdGVQcm9qZWN0QXJyKFwiV29yayB0YXNrc1wiKTtcbiAgY29uc29sZS5sb2cocHJvamVjdHMpO1xuXG4gIHByb2plY3RzWzBdLmNyZWF0ZVRhc2soXG4gICAgXCJCdXkgYSBuZXcgZHJlc3NcIixcbiAgICBcImJ1eSBhIG5ldyBkcmVzcyBmb3IgTWFyeSdzIHdlZGRpbmcgb24gMjAuMDQuMjAyM1wiLFxuICAgIFwiMjAyMy0wNC0xMFwiLFxuICAgIHRydWVcbiAgKTtcbiAgcHJvamVjdHNbMF0uY3JlYXRlVGFzayhcbiAgICBcIk1ha2UgYSBkZW50aXN0J3MgYXBwb2ludG1lbnRcIixcbiAgICBcIk1ha2UgYSBkZW50aXN0J3MgYXBwb2ludG1lbnQgdG8gY2hlY2sgb3V0IGEgY2F2aXR5XCIsXG4gICAgXCIyMDIzLTAyLTI1XCIsXG4gICAgdHJ1ZVxuICApO1xuICBwcm9qZWN0c1sxXS5jcmVhdGVUYXNrKFxuICAgIFwiQnV5IGEgbmV3IG11Z1wiLFxuICAgIFwiQnV5IGEgbmV3IGNvZmZlZSBtdWcgdG8gbGVhdmUgYXQgd29ya1wiLFxuICAgIFwiMjAyMy0wMy0wMVwiLFxuICAgIGZhbHNlXG4gICk7XG5cbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcm9qZWN0c0pTT05cIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdHMpKTtcbn0gZWxzZSB7XG4gIHByb2plY3RzSlNPTi5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgcmVnYWluUHJvamVjdE1ldGhvZHMocHJvamVjdCk7XG4gICAgcHJvamVjdC50YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiByZWdhaW5UYXNrTWV0aG9kcyh0YXNrKSk7XG4gIH0pO1xuICBwcm9qZWN0cyA9IHByb2plY3RzSlNPTjtcbn1cblxuZnVuY3Rpb24gcmVnYWluVGFza01ldGhvZHModGFzaykge1xuICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGFzaywgVGFzay5wcm90b3R5cGUpO1xufVxuXG5mdW5jdGlvbiByZWdhaW5Qcm9qZWN0TWV0aG9kcyhwcm9qZWN0KSB7XG4gIE9iamVjdC5zZXRQcm90b3R5cGVPZihwcm9qZWN0LCBQcm9qZWN0LnByb3RvdHlwZSk7XG59XG5cbmZ1bmN0aW9uIHNhdmVDaGFuZ2VzKCkge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInByb2plY3RzSlNPTlwiLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xufVxuXG5kaXNwbGF5UHJvamVjdHMoKTtcblxuY29uc29sZS5sb2cocHJvamVjdHMpO1xuXG5leHBvcnQgeyBzYXZlQ2hhbmdlcyB9O1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicHJvamVjdHMiLCJQcm9qZWN0IiwiY29uc3RydWN0b3IiLCJuYW1lIiwidGhpcyIsInRhc2tzIiwiY3JlYXRlVGFzayIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkYXRlIiwicHJpb3JpdHkiLCJjb21wbGV0ZSIsInRhc2sxIiwiVGFzayIsInB1c2giLCJkZWxldGVUYXNrIiwidGFza0luZGV4Iiwic3BsaWNlIiwiZWRpdFRhc2siLCJuZXdUaXRsZSIsIm5ld0Rlc2NyaXB0aW9uIiwibmV3RGF0ZSIsIm5ld1ByaW9yaXR5IiwiY3JlYXRlUHJvamVjdEFyciIsInByb2plY3ROYW1lIiwicHJvamVjdDIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9qZWN0c0NvbnRhaW5lciIsImFkZFByb2plY3QiLCJjYW5jZWxQcm9qZWN0IiwiYWRkVGFza0J0biIsImNhbmNlbFRhc2tCdG4iLCJlZGl0VGFza0J0biIsImNsb3NlRWRpdFRhc2tCdG4iLCJkaXNwbGF5UHJvamVjdHMiLCJpbm5lckhUTUwiLCJpIiwibGVuZ3RoIiwicCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImRhdGFzZXQiLCJjbGFzc0xpc3QiLCJhZGQiLCJwaW4iLCJzZXRBdHRyaWJ1dGUiLCJwTmFtZSIsInBuIiwidGV4dENvbnRlbnQiLCJ0YXNrQ29udGFpbmVyIiwidGMiLCJvcGVuVGFza0Zvcm1CdG4iLCJvdGYiLCJhZGRFdmVudExpc3RlbmVyIiwiYXQiLCJzdHlsZSIsImRpc3BsYXkiLCJqIiwidGFza0RpdiIsInRuIiwicGMiLCJjaGFuZ2VTdGF0dXMiLCJjcCIsImMiLCJjaGVja2VkIiwic2F2ZUNoYW5nZXMiLCJzaG9ydFRhc2siLCJ0dCIsInR0cCIsInZpZXdEZXRhaWxzQnRuIiwidiIsInZwIiwiZGV0YWlscyIsInZkIiwidmRwIiwiaW5zZXJ0QmVmb3JlIiwiYnV0dG9uQ29udGFpbmVyIiwidGFza1RpdGxlIiwidGFza0Rlc2NyaXB0aW9uIiwidGFza0RhdGUiLCJpbXBvcnRhbnQiLCJ0YXNrUHJpb3JpdHkiLCJjb21wbGV0ZW5lc3MiLCJ0YXNrQ29tcGxldGUiLCJjb21wbGV0ZXAiLCJhcHBlbmQiLCJyZW1vdmVDaGlsZCIsIm9wZW5FZGl0QnRuIiwiZSIsImVwIiwiZXQiLCJldHAiLCJnZXRFbGVtZW50QnlJZCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJjb25zb2xlIiwibG9nIiwiY2xvc2VFZGl0VGFza0Zvcm0iLCJyZW5ld0Rpc3BsYXkiLCJkZWxldGVUYXNrQnRuIiwiZCIsImRwIiwiZGVsZXRlUHJvamVjdEJ0biIsInBkIiwicHJvamVjdEluZGV4Iiwib3BlblByb2plY3RGb3JtIiwiY2xvc2VQcm9qZWN0Rm9ybSIsImNhbmNlbFRhc2siLCJwcm9qZWN0c0pTT04iLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImZvckVhY2giLCJwcm9qZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJyZWdhaW5Qcm9qZWN0TWV0aG9kcyIsInRhc2siLCJyZWdhaW5UYXNrTWV0aG9kcyJdLCJzb3VyY2VSb290IjoiIn0=